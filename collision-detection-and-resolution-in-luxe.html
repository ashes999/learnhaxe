<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="ashes999">
    <link rel="icon" href="content/favicon.ico">

    <title>Collision Detection and Resolution in Luxe | Learn Haxe</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link href="content/blog.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <link type="application/atom+xml" title="Learn Haxe" href="http://ashes999.github.io/learnhaxe/atom.xml" rel="alternate" />
</head>

  <body><script type="text/javascript">
if (window.location.href.indexOf('file://') == -1) {
  // Not locally viewing the file. Do your Google Analytics thing.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57858649-1', 'auto');
  ga('send', 'pageview');
}
</script>

    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
          <a class="blog-nav-item" href="index.html">Home</a>
          <a class="blog-nav-item" href="about.html">About</a>
        </nav>
      </div>
    </div>

    <div class="container">

      <div class="blog-header">
        <h1 class="blog-title">Learn Haxe</h1>
        <p class="lead blog-description">An easier way to learn how to use the Haxe core and related technologies.</p>
      </div>

      <div class="row">

        <div class="col-sm-8 blog-main">

          <div class="blog-post">
            <h2 class="blog-post-title">Collision Detection and Resolution in Luxe</h2>
            <p class="blog-post-meta">Posted on 2016-07-29</p>
            <p><strong>Tagged with:</strong> <a href="tag-Luxe.html">Luxe</a></p>
<p>Disclaimer: I just started using Luxe. First impression: engine seems very usable (great API design) and things work well. But, very poorly documented (API docs are sparse and there aren't many blog posts about how to do things using Luxe.)</p>
<p>I'm working on a <a href="https://github.com/ashes999/opal-quest/tree/luxe">small arena 2D shooter in Luxe</a>. I have a ship (<code>Sprite</code> instance) and a bunch of walls (also <code>Sprite</code> instances). How can I:</p><ul><li>Find out when the ship hits a wall?</li><li>Prevent the ship from moving into the wall, or move the ship back out of the wall after the collision?</li></ul>
<p>Luxe includes a number of packages/classes related to collision detection. I stumbled upon the <a href="http://luxeengine.com/docs/api/luxe/collision/shapes/Polygon.html"><code>Polygon</code> class</a>. It includes two helpful methods:</p><ul><li><code>Polygon.rectangle(x, y, width, height):</code> create a rectangular polygon, specifying position and size.</li><li><code>polygonInstance.testPolygon(polygon):</code> check if <code>polygonInstance</code> intersects <code>testPolygon</code>.</li></ul>
<p>if <code>testPolygon</code> finds an intersection, it returns a non-null object with a number of fields. Of interest to us is the <code>separation</code> property, which tells us how much to move <code>polygonInstance</code> to get it to stop colliding with <code>polygon</code>.</p>
<p>Putting these together, we get something like this:</p>
<pre><code>var shipPolygon = Polygon.rectangle(ship.pos.x, ship.pos.y, ship.size.x, ship.size.y);
var wallPolygon = Polygon.rectangle(wall.pos.x, wall.pos.y, wall.size.x, wall.size.y);
var result = shipPolygon.testPolygon(wall);
if (result != null)
{
    ship.pos.x += result.separation.x;
    ship.pos.y += result.separation.y;
}</code></pre>
<p>This correctly causes the <code>ship</code> to stop when it hits <code>wall</code>.</p>

            <div id="disqus_thread"></div>
<script type="text/javascript">

var disqus_config = function () {
  this.page.url = "http://ashes999.github.io/learnhaxe/collision-detection-and-resolution-in-luxe"; // Absolute page URL
  this.page.identifier = "f9b47ee908e9ebabce9fabbfdd7596e3cd65dd27"; // Any unique, stable string identifier
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = 'http://butterflyhx.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

          </div>

          <!--nav>
            <ul class="pager">
              <li><a href="#">Previous</a></li>
              <li><a href="#">Next</a></li>
            </ul>
          </nav-->

        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
            <h4>About</h4>
            <p>Short, direct, how-to articles about Haxe and the ecosystem. <a href="http://ashes999.github.io/learnhaxe/about.html">Read more</a></p>
          </div>
          <div class="sidebar-module">
            <h4>Tags</h4>
            <ul class="list-unstyled">
              <ul><li><a href="tag-Haxe.html">Haxe</a></li>
<li><a href="tag-HaxeFlixel.html">HaxeFlixel</a></li>
<li><a href="tag-Kha.html">Kha</a></li>
<li><a href="tag-Luxe.html">Luxe</a></li>
<li><a href="tag-OpenFL.html">OpenFL</a></li>
</ul>
            </ul>
          </div>
          <div class="sidebar-module">
            <h4>RSS Feed</h4>
            <a href="http://ashes999.github.io/learnhaxe/atom.xml"><img src="content/rss-icon.svg" width="64" height="64"</a>
          </div>
          <div class="sidebar-module">
            <h4>Elsewhere</h4>
            <ol class="list-unstyled">
              <li><a href="http://github.com/ashes999/learnhaxe">Learn Haxe source on GitHub</a></li>
            </ol>
          </div>
        </div><!-- /.blog-sidebar -->

      </div><!-- /.row -->

    </div><!-- /.container -->

    <footer class="blog-footer">
      <p>
        <a href="#">Back to top</a> ::
        crafted with <a href="https://github.com/ashes999/butterfly">Butterfly</a>
      </p>
    </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-1.9.1.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" crossorigin="anonymous"></script>
  </body>
</html>
