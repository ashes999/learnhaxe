<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="ashes999">
    <link rel="icon" href="content/favicon.ico">

    <title>FileStat.ctime on Unix | Learn Haxe</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link href="content/blog.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <link type="application/atom+xml" title="Learn Haxe" href="http://ashes999.github.io/learnhaxe/atom.xml" rel="alternate" />
</head>

  <body><script type="text/javascript">
if (window.location.href.indexOf('file://') == -1) {
  // Not locally viewing the file. Do your Google Analytics thing.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57858649-1', 'auto');
  ga('send', 'pageview');
}
</script>

    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
          <a class="blog-nav-item" href="index.html">Home</a>
          <a class="blog-nav-item" href="about.html">About</a>
        </nav>
      </div>
    </div>

    <div class="container">

      <div class="blog-header">
        <h1 class="blog-title">Learn Haxe</h1>
        <p class="lead blog-description">An easier way to learn how to use the Haxe core and related technologies.</p>
      </div>

      <div class="row">

        <div class="col-sm-8 blog-main">

          <div class="blog-post">
            <h2 class="blog-post-title">FileStat.ctime on Unix</h2>
            <p class="blog-post-meta">Posted on 2015-12-01</p>
            <p><strong>Tagged with:</strong> <a href="tag-Haxe.html">Haxe</a></p>
<p>The <a href="http://api.haxe.org/sys/FileStat.html#ctime">API docs for sys.FileStat</a> state that <code>ctime</code> returns <code>the creation time for the file (not all filesystems support this)</code>.</p>
<p>This returns correctly on Windows, but not on Linux (I tested with both <code>cpp</code> and <code>neko</code> targets).</p>
<p>Windows stores the file creation time. On Linux, the story is more complicated. <code>ctime</code> is a C++ API. Windows stores the file creation time.  On Linux, according to <a href="http://unix.stackexchange.com/a/20464/64805">this Unix SE question</a> (which is mostly derived from <code>man</code> pages):</p>
<blockquote>
<p>Most unices do not have a concept of file creation time. [...]
Note that <strong>the ctime</strong> (<code>ls -lc</code>) <strong>is not the file creation time</strong>, it's the <a href="http://en.wikipedia.org/wiki/Inode">inode</a> change time. The inode change time is updated whenever anything about the file changes (contents or metadata) except that the ctime isn't updated when the file is merely read (even if the atime is updated). In particular, the ctime is always more recent than the mtime (file content modification time) unless the mtime has been explicitly set to a date in the future.</p></blockquote>
<p>I couldn't trace the Haxe source all the way down the stack, but I believe it does access the Unix <code>ctime</code> on Unix. This leaves us in a bind: how do we know the file creation time on Unix?</p>
<p>One option I came up with is to use <a href="http://api.haxe.org/sys/io/Process.html">sys.io.Process</a> to fork a process, execute a command like <code>stat</code> to get the file time, and parse the output. This is possible, but on Ubuntu 14.04, I tested this, and the file birth time is unknown (the filesystem doesn't store it). This is also expensive, and the results should be cached.</p>
<p>If this is not possible or performant, the other option may be to store the time somewhere yourself. I ran into this while creating <a href="http://github.com/ashes999/butterfly">Butterfly</a>, a static blog generator which uses file time to guess the blog post publish date. Jekyll (a similar, Ruby based appliaction) requires users enter the post time in the filename.</p>
<p>There may be other solutions, but I don't know of any.</p>

            <div id="disqus_thread"></div>
<script type="text/javascript">

var disqus_config = function () {
  this.page.url = "http://ashes999.github.io/learnhaxe/filestat-ctime-on-unix"; // Absolute page URL
  this.page.identifier = "00b43a606c790c79ebaa2753eeb9e329005d3f4f"; // Any unique, stable string identifier
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = 'http://butterflyhx.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

          </div>

          <!--nav>
            <ul class="pager">
              <li><a href="#">Previous</a></li>
              <li><a href="#">Next</a></li>
            </ul>
          </nav-->

        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
            <h4>About</h4>
            <p>Short, direct, how-to articles about Haxe and the ecosystem. <a href="http://ashes999.github.io/learnhaxe/about.html">Read more</a></p>
          </div>
          <div class="sidebar-module">
            <h4>Tags</h4>
            <ul class="list-unstyled">
              <ul><li><a href="tag-Haxe.html">Haxe</a></li>
<li><a href="tag-HaxeFlixel.html">HaxeFlixel</a></li>
<li><a href="tag-OpenFL.html">OpenFL</a></li>
</ul>
            </ul>
          </div>
          <div class="sidebar-module">
            <h4>RSS Feed</h4>
            <a href="http://ashes999.github.io/learnhaxe/atom.xml"><img src="content/rss-icon.svg" width="64" height="64"</a>
          </div>
          <div class="sidebar-module">
            <h4>Elsewhere</h4>
            <ol class="list-unstyled">
              <li><a href="http://github.com/ashes999/learnhaxe">Learn Haxe source on GitHub</a></li>
            </ol>
          </div>
        </div><!-- /.blog-sidebar -->

      </div><!-- /.row -->

    </div><!-- /.container -->

    <footer class="blog-footer">
      <p>
        <a href="#">Back to top</a> ::
        crafted with <a href="https://github.com/ashes999/butterfly">Butterfly</a>
      </p>
    </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-1.9.1.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" crossorigin="anonymous"></script>
  </body>
</html>
